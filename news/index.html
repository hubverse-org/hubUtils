<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • hubUtils</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://hubverse-org.github.io/hubUtils/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://hubdocs.readthedocs.io/en/latest/" class="external-link"><img src="https://raw.githubusercontent.com/hubverse-org/hubStyle/main/inst/hubverse.png" id="logo" height="30" alt="hubverse"></a>
    <a class="navbar-brand me-2" href="../index.html">hubUtils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.7.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/hubverse-org/hubUtils/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/hubverse-org/hubUtils/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="hubutils-development-version">hubUtils (development version)<a class="anchor" aria-label="anchor" href="#hubutils-development-version"></a></h2>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.7" id="hubutils-017">hubUtils 0.1.7<a class="anchor" aria-label="anchor" href="#hubutils-017"></a></h2><p class="text-muted">CRAN release: 2024-09-18</p>
<ul><li>First submission to CRAN</li>
<li>Removed <code>hubData</code> dependency</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.2" id="hubutils-012">hubUtils 0.1.2<a class="anchor" aria-label="anchor" href="#hubutils-012"></a></h2>
<ul><li>Bug fix: Corrected bug in v3 config utilities so that configs are detected as <code>v3</code> if they are <code>v3.0.0</code> or above, not just <code>v3.0.0</code>. Thanks to <a href="https://github.com/M-7th" class="external-link">@M-7th</a> for reporting.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="hubutils-011">hubUtils 0.1.1<a class="anchor" aria-label="anchor" href="#hubutils-011"></a></h2>
<ul><li>Remove <code>hubAdmin</code> Suggests dependency by moving test hub configuration validation to CI (resolved: <a href="https://github.com/annakrystalli" class="external-link">@annakrystalli</a>, <a href="https://github.com/hubverse-org/hubUtils/issues/158" class="external-link uri">https://github.com/hubverse-org/hubUtils/issues/158</a>)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="hubutils-010">hubUtils 0.1.0<a class="anchor" aria-label="anchor" href="#hubutils-010"></a></h2>
<ul><li>Add <code><a href="../reference/read_config_file.html">read_config_file()</a></code> helper function to read a JSON config file from a file path.</li>
<li>Add <code><a href="../reference/extract_schema_version.html">extract_schema_version()</a></code> helper function to extract the schema version from a schema <code>id</code> or config <code>schema_version</code> property character string.</li>
<li>Add helpers <code>is_v3_config</code>, <code>is_v3_config_file</code> and <code>is_v3_config_hub</code> to check whether a config object, file or hub is using schema version 3.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.2" id="hubutils-002">hubUtils 0.0.2<a class="anchor" aria-label="anchor" href="#hubutils-002"></a></h2>
<ul><li>Missing dependency (<code>jsonlite</code>) bug fix.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.1" id="hubutils-001-major-release">hubUtils 0.0.1 MAJOR RELEASE<a class="anchor" aria-label="anchor" href="#hubutils-001-major-release"></a></h2>
<ul><li>First <strong>major release of <code>hubUtils</code> package</strong> containing significant breaking changes. Much of the package has been moved and split across two smaller and more dedicated packages:
<ul><li>
<strong><code>hubData</code> package</strong>: contains functions for connecting to and interacting with hub data.
<ul><li>Exported functions moved to <code>hubData</code>: <code>connect_hub()</code>, <code>connect_model_output()</code>, <code>expand_model_out_val_grid()</code>, <code>create_model_out_submit_tmpl()</code>, <code>coerce_to_character()</code>, <code>coerce_to_hub_schema()</code> and <code>create_hub_schema()</code>.</li>
<li>
<code>hubUtils</code> functions re-exported to <code>hubData</code>: <code><a href="../reference/as_model_out_tbl.html">as_model_out_tbl()</a></code>, <code><a href="../reference/validate_model_out_tbl.html">validate_model_out_tbl()</a></code>, <code><a href="../reference/model_id_merge.html">model_id_split()</a></code> and <code><a href="../reference/model_id_merge.html">model_id_merge()</a></code>.</li>
</ul></li>
<li>
<strong><code>hubAdmin</code> package</strong>: contains functions for administering Hubs, in particular creating and validating hub configuration files. Exported functions moved to <code>hubAdmin</code>:
<ul><li>Functions for creating config files: <code>create_config()</code>, <code>create_model_task()</code>, <code>create_model_tasks()</code>, <code>create_output_type()</code>, <code>create_output_type_cdf()</code>, <code>create_output_type_mean()</code>, <code>create_output_type_median()</code>, <code>create_output_type_pmf()</code>, <code>create_output_type_quantile()</code>, <code>create_output_type_sample()</code>, <code>create_round()</code>, <code>create_rounds()</code>, <code>create_target_metadata()</code>, <code>create_target_metadata_item()</code>, <code>create_task_id()</code>, <code>create_task_ids()</code>.</li>
<li>Functions for validating config files: <code>validate_config()</code>,<code>validate_model_metadata_schema()</code>, <code>validate_hub_config()</code>, <code>view_config_val_errors()</code>.</li>
</ul></li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9019" id="hubutils-0009019">hubUtils 0.0.0.9019<a class="anchor" aria-label="anchor" href="#hubutils-0009019"></a></h2>
<ul><li>Minor internal bug fixes and documentation updates.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9018" id="hubutils-0009018">hubUtils 0.0.0.9018<a class="anchor" aria-label="anchor" href="#hubutils-0009018"></a></h2>
<ul><li>Added US and European location datasets. These can be used e.g. when assigning location task ID values for <code>tasks.json</code> config files programmatically (<a href="https://github.com/hubverse-org/hubUtils/issues/127" class="external-link">#127</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9017" id="hubutils-0009017">hubUtils 0.0.0.9017<a class="anchor" aria-label="anchor" href="#hubutils-0009017"></a></h2>
<ul><li>
<code>connect_hub()</code> and <code>connect_model_output()</code> now identify and report on files that are present and should have been opened but for which a connection was not successful (<a href="https://github.com/hubverse-org/hubUtils/issues/124" class="external-link">#124</a>)</li>
<li>Introduced a number of minor documentation clarifications and bug fixes (<a href="https://github.com/hubverse-org/hubUtils/issues/129" class="external-link">#129</a>, <a href="https://github.com/hubverse-org/hubUtils/issues/128" class="external-link">#128</a>, <a href="https://github.com/hubverse-org/hubUtils/issues/121" class="external-link">#121</a>, <a href="https://github.com/hubverse-org/hubUtils/issues/130" class="external-link">#130</a>)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9016" id="hubutils-0009016">hubUtils 0.0.0.9016<a class="anchor" aria-label="anchor" href="#hubutils-0009016"></a></h2>
<ul><li>Added <code>validate_model_metadata_schema()</code> function and included it as part of <code>validate_hub_config()</code> (<a href="https://github.com/hubverse-org/hubUtils/issues/110" class="external-link">#110</a> &amp; <a href="https://github.com/hubverse-org/hubUtils/issues/112" class="external-link">#112</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9015" id="hubutils-0009015">hubUtils 0.0.0.9015<a class="anchor" aria-label="anchor" href="#hubutils-0009015"></a></h2>
<ul><li>Added <code>load_model_metadata()</code> function to compile hub model metadata.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9014" id="hubutils-0009014">hubUtils 0.0.0.9014<a class="anchor" aria-label="anchor" href="#hubutils-0009014"></a></h2>
<ul><li>Added <code>coerce_to_character()</code> function for coercing all model output columns to character. This can be much faster than coercing to <code>coerce_to_hub_schema()</code>, especially for dates.</li>
<li>Added the following parameters to <code>expand_model_out_val_grid()</code>:
<ul><li>
<code>all_character</code>: allow for returning all character columns.</li>
<li>
<code>as_arrow_table</code>: allow for returning an arrow data table.</li>
<li>
<code>bind_model_tasks</code>: allow for returning list of model task level grids.</li>
</ul></li>
<li>Bug fix. Handle situation in <code>expand_model_out_val_grid()</code> when <code>required_vals_only = TRUE</code> yet required task ID columns are not consistent across modeling tasks. The function now pads missing task ID column values with <code>NA</code>s.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9013" id="hubutils-0009013">hubUtils 0.0.0.9013<a class="anchor" aria-label="anchor" href="#hubutils-0009013"></a></h2>
<ul><li>Introduced <code>coerce_to_hub_schema()</code> function and applied it to <code>create_model_out_submit_tmpl()</code> &amp; <code>expand_model_out_val_grid()</code> to ensure column data types in returned tibbles are consistent with the hub’s schema (<a href="https://github.com/hubverse-org/hubUtils/issues/100" class="external-link">#100</a>).</li>
<li>Fixed bug where optional <code>mean</code>/<code>median</code> output types where being included erroneously when <code>required_vals_only = TRUE</code>.</li>
<li>Exported function <code><a href="../reference/get_round_task_id_names.html">get_round_task_id_names()</a></code> (<a href="https://github.com/hubverse-org/hubUtils/issues/99" class="external-link">#99</a>).</li>
<li>Memoized function <code><a href="../reference/read_config.html">read_config()</a></code> (<a href="https://github.com/hubverse-org/hubUtils/issues/101" class="external-link">#101</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9012" id="hubutils-0009012">hubUtils 0.0.0.9012<a class="anchor" aria-label="anchor" href="#hubutils-0009012"></a></h2>
<ul><li>Fixed bug (<a href="https://github.com/hubverse-org/hubUtils/issues/95" class="external-link">#95</a> &amp; <a href="https://github.com/hubverse-org/hubUtils/issues/97" class="external-link">#97</a>) which was causing <code>connect_hub()</code> to error when <code>"csv"</code> was an accepted hub file format but there were no CSV in the model output directory. Now <code>connect_hub()</code> checks for the presence of files of each accepted file format and only opens datasets for file formats of which files exists. If there are no files of any accepted file_format in the model output directory, the S3 <code>hub_connection</code> object returned consists of an empty list.</li>
<li>Fixed bug (<a href="https://github.com/hubverse-org/hubUtils/issues/96" class="external-link">#96</a>) which was required <code>hubUtils</code> to be loaded for <code>std_colnames</code> to be internally available.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9011" id="hubutils-0009011">hubUtils 0.0.0.9011<a class="anchor" aria-label="anchor" href="#hubutils-0009011"></a></h2>
<ul><li>Changed default behavior of <code>create_model_out_submit_tmpl()</code>. Function now, by default, returns rows of complete cases only and the behavior is controlled by argument <code>complete_cases_only</code>. Argument <code>remove_empty_cols</code> was also removed.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9010" id="hubutils-0009010">hubUtils 0.0.0.9010<a class="anchor" aria-label="anchor" href="#hubutils-0009010"></a></h2>
<ul><li>
<strong>Support for Hubs using schema earlier than v2.0.0 deprecated</strong>. Currently a warning is issued when interacting with such Hubs. Support will eventually be retired completely and errors will be produced with Hubs using older config schema.</li>
<li>Added <code>create_model_out_submit_tmpl()</code> for generating round specific model output template tibbles (<a href="https://github.com/hubverse-org/hubUtils/issues/82" class="external-link">#82</a>).</li>
<li>Added lower level utilities:
<ul><li>
<code>expand_model_out_val_grid()</code> for creating an expanded grid of valid task ID and output type ID across round modeling tasks and output types.</li>
<li>
<code><a href="../reference/get_round_idx.html">get_round_idx()</a></code>: for getting an integer index of the element in <code>config_tasks$rounds</code> that a character round identifier maps to.</li>
<li>
<code><a href="../reference/get_round_idx.html">get_round_ids()</a></code>: for getting a list or character vector of Hub round IDs.</li>
</ul></li>
<li>Added additional <code>tasks.json</code> validation checks via <code>validate_config()</code>:
<ul><li>Check that all task_id and output_type_id values are unique across <code>required</code> and <code>optional</code> properties.</li>
<li>In rounds where <code>round_id_from_variable</code> is <code>TRUE</code>, check that the specification of the task_id set as <code>round_id</code> is consistent across modeling tasks.</li>
<li>Check that <code>round_id</code> values are unique across rounds.</li>
</ul></li>
<li>Exported object <code>std_colnames</code> which contains standard column names used in hubverse model output data files, for use in other hubverse packages (<a href="https://github.com/hubverse-org/hubUtils/issues/88" class="external-link">#88</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9009" id="hubutils-0009009">hubUtils 0.0.0.9009<a class="anchor" aria-label="anchor" href="#hubutils-0009009"></a></h2>
<ul><li>Added <code><a href="../reference/as_model_out_tbl.html">as_model_out_tbl()</a></code> function to standardize model output data by converting to a <code>model_out_tbl</code> S3 class object. (<a href="https://github.com/hubverse-org/hubUtils/issues/32" class="external-link">#32</a>, <a href="https://github.com/hubverse-org/hubUtils/issues/33" class="external-link">#33</a>, <a href="https://github.com/hubverse-org/hubUtils/issues/63" class="external-link">#63</a>, <a href="https://github.com/hubverse-org/hubUtils/issues/64" class="external-link">#64</a>, <a href="https://github.com/hubverse-org/hubUtils/issues/66" class="external-link">#66</a>)</li>
<li>To support back-compatibility with model output data in older hubs, added functions <code><a href="../reference/model_id_merge.html">model_id_merge()</a></code> and <code><a href="../reference/model_id_merge.html">model_id_split()</a></code> to create <code>model_id</code> column from separate <code>team_abbr</code> and <code>model_abbr</code> columns and vice versa (<a href="https://github.com/hubverse-org/hubUtils/issues/63" class="external-link">#63</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9008" id="hubutils-0009008">hubUtils 0.0.0.9008<a class="anchor" aria-label="anchor" href="#hubutils-0009008"></a></h2>
<ul><li>Added argument <code>output_type_id_datatype</code> to <code>connect_hub()</code> to allow overriding default behavior of automatically detecting the <code>output_type_id</code> column data type from the <code>tasks.json</code> config file (<a href="https://github.com/hubverse-org/hubUtils/issues/70" class="external-link">#70</a>).</li>
<li>Exposed <code>create_hub_schema()</code> argument <code>partitions</code> to <code>connect_hub()</code> function to accommodate custom hub partitioning.</li>
<li>Added argument <code>partition_names</code> to <code>connect_model_output()</code> to accommodate custom hub partitioning.</li>
<li>Added argument <code>schema</code> to <code>connect_model_output()</code> to allow for overriding default <code>arrow</code> schema auto-detection.</li>
<li>Moved <code>jsonvalidate</code> package to Imports so Hub administrator functionality accessible through standard installation.</li>
<li>Removed argument <code>format</code> from <code>create_hub_schema()</code> which now creates the same schema from a <code>tasks.json</code> config file, regardless of the data file format (<a href="https://github.com/hubverse-org/hubUtils/issues/80" class="external-link">#80</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9007" id="hubutils-0009007">hubUtils 0.0.0.9007<a class="anchor" aria-label="anchor" href="#hubutils-0009007"></a></h2>
<ul><li>New function <code>validate_hub_config()</code> allows maintainers to check the validity of hub config files in a single call. Function <code>view_config_val_errors()</code> also modified to create combined report for hub config files from output of <code>validate_hub_config()</code>.</li>
<li>Breaking change: All <code>model-output</code> data are expected to have <code>output_type</code> &amp; <code>output_type_id</code> instead of <code>type</code> &amp; <code>type_id</code> respectively.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9006" id="hubutils-0009006">hubUtils 0.0.0.9006<a class="anchor" aria-label="anchor" href="#hubutils-0009006"></a></h2>
<ul><li>
<code>connect_hub()</code> now automatically determines the <code>output_type_id</code> column data type from the <code>tasks.json</code> config file coercing to the highest possible data type, “character” being the lowest denominator.</li>
<li>Introduced function <code>create_hub_schema()</code> for determining the schema for data in a hub’s model-output directory from a <code>tasks.json</code> config file.</li>
<li>
<code>connect_hub()</code> now allows establishing connections to hubs with multiple file type formats.</li>
<li>
<code>create_output_type_categorical()</code> function was renamed to <code>create_output_type_pmf()</code>.</li>
<li>When extracting data via a hub connection, the column containing model identification information, inferred from <code>model-output</code> data directory partitions, was renamed from “model” to “model_id”.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9005" id="hubutils-0009005">hubUtils 0.0.0.9005<a class="anchor" aria-label="anchor" href="#hubutils-0009005"></a></h2>
<ul><li>Re-implemented <code>connect_hub()</code> function to open connection to <code>model-output</code> data implemented through an <code>arrow</code> <code>FileSystemDataset</code> object. This allows users to create custom <code>dplyr</code> queries to access model output data.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9004" id="hubutils-0009004">hubUtils 0.0.0.9004<a class="anchor" aria-label="anchor" href="#hubutils-0009004"></a></h2>
<ul><li>Added functionality to help create JSON configuration files.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9003" id="hubutils-0009003">hubUtils 0.0.0.9003<a class="anchor" aria-label="anchor" href="#hubutils-0009003"></a></h2>
<ul><li>Added <code>validate_config()</code> function to validate JSON configuration files against Hub schema as well as function <code>view_config_val_errors()</code> for viewing a concise and easier to navigate table of validation errors.</li>
<li>Added a <code>NEWS.md</code> file to track changes to the package.</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anna Krystalli.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1. PR Previews built by <a href="https://www.netlify.com" class="external-link">Netlify</a>. Provided without <strong>any warranty</strong>.</p>
</div>

    </footer></div>





  </body></html>

